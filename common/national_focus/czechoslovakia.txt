focus_tree = {
	id = czech_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = CZE
		}
	}
	
	default = no

	continuous_focus_position = { x = 50 y = 1100 }

	shared_focus = HABSBURG_part_of_something_bigger

####INDUSTRY
	focus = {
		id = CZE_great_depression_aftermath
		icon = GFX_SOV_committee_in_exile_ccp_2d_sov_compatibility
		
		#prerequisite = { 
		#	focus = CZE_new_arms_plants
		#}
		
		mutually_exclusive = { 
		}
		
		x = 0
		y = 0
		#relative_position_id = CZE_new_arms_plants

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
		}
		
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			#random_owned_controlled_state = {
			#	prioritize = { 9 }
			#	limit = {
			#		is_core_of = ROOT
			#		free_building_slots = {
			#			building = arms_factory
			#			size > 2
			#			include_locked = yes
			#		}
			#	}
			#	add_extra_state_shared_building_slots = 3
			#	add_building_construction = {
			#		type = industrial_complex
			#		level = 1
			#		instant_build = yes
			#	}
			#	add_building_construction = {
			#		type = arms_factory
			#		level = 2
			#		instant_build = yes
			#	}
			#}
			####REMOVE GREAT DEPRESSION
			add_tech_bonus = {
				bonus = 1
				uses = 1
				category = industry
			}
			
		}
	}
	focus = {
		id = CZE_modernize_skoda
		icon = GFX_SOV_committee_in_exile_ccp_2d_sov_compatibility
		
		prerequisite = { 
			focus = CZE_great_depression_aftermath
		}
		
		mutually_exclusive = { 
		}
		
		x = 3
		y = 1
		relative_position_id = CZE_great_depression_aftermath

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
		}
		
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			#random_owned_controlled_state = {
			#	prioritize = { 9 }
			#	limit = {
			#		is_core_of = ROOT
			#		free_building_slots = {
			#			building = arms_factory
			#			size > 2
			#			include_locked = yes
			#		}
			#	}
			#	add_extra_state_shared_building_slots = 3
			#	add_building_construction = {
			#		type = industrial_complex
			#		level = 1
			#		instant_build = yes
			#	}
			#	add_building_construction = {
			#		type = arms_factory
			#		level = 2
			#		instant_build = yes
			#	}
			#}
			#####ADDS SKODA WORKS
			
		}
	}
	focus = {
		id = CZE_secure_export_deals
		icon = GFX_SOV_committee_in_exile_ccp_2d_sov_compatibility
		
		prerequisite = { 
			focus = CZE_modernize_skoda
		}
		
		mutually_exclusive = { 
		}
		
		x = 0
		y = 1
		relative_position_id = CZE_modernize_skoda

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
		}
		
		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			#random_owned_controlled_state = {
			#	prioritize = { 9 }
			#	limit = {
			#		is_core_of = ROOT
			#		free_building_slots = {
			#			building = arms_factory
			#			size > 2
			#			include_locked = yes
			#		}
			#	}
			#	add_extra_state_shared_building_slots = 3
			#	add_building_construction = {
			#		type = industrial_complex
			#		level = 1
			#		instant_build = yes
			#	}
			#	add_building_construction = {
			#		type = arms_factory
			#		level = 2
			#		instant_build = yes
			#	}
			#}
			###ADDS ARMS EXPORTS
			###TRADE OPINION
			####RESEARCH SPEED
			###PROD GROWTH
			
		}
	}
	


#######################################
##### MILITARY RESEARCH INSTITUTE #####	
#######################################

	focus = {
		id = CZE_military_research_institute
		icon = GFX_focus_CZE_military_research_institute
		x = 11
		y = 0
		#relative_position_id = CZE_strategy_decisions

		cost = 10

		ai_will_do = {
			factor = 90
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			army_experience = 50
			add_breakthrough_progress = {
				specialization = specialization_land
				value = 0.25
			}
		}
	}

	focus = {
		id = CZE_mountain_bonus
		icon = GFX_focus_SMB_special_forces_option_1
		prerequisite = { focus = CZE_military_research_institute }
		x = -3
		y = 1
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CZE_mountain_bonus
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = mountaineers_tech
			}
		}
	}

	focus = {
		id = CZE_inf_and_artillery_advancement
		icon = GFX_goal_rhineland
		prerequisite = { focus = CZE_military_research_institute }
		x = -1
		y = 1
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CZE_inf_and_artillery_advancement
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = infantry_weapons
			}
		}
	}

	focus = {
		id = CZE_support_bonus
		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = CZE_mountain_bonus }
		x = -3
		y = 2
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 60
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CZE_support_bonus #@#
				bonus = 1.0
				uses = 2
				category = support_tech	
			}
			add_tech_bonus = {
				name = CZE_support_bonus #@#
				bonus = 1.0
				uses = 1
				technology = support_weapons2
				technology = support_weapons3
			}
		}
	}

	focus = {
		id = CZE_inf_and_artillery_advancement_2
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = CZE_inf_and_artillery_advancement }
		x = -1
		y = 2
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CZE_inf_and_artillery_advancement_2 #@#
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = artillery
			}
		}
	}

	focus = {
		id = CZE_doctrine_bonus
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = CZE_support_bonus }
		prerequisite = { focus = CZE_inf_and_artillery_advancement_2 }
		x = -2
		y = 3
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 1
				uses = 1
				category = land_doctrine
			}
		}
	}

	focus = {
		id = CZE_motorization_scheme
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = CZE_military_research_institute }
		x = 1
		y = 1
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 60
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {
			has_tech = motorised_infantry
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = motorized_bonus
				bonus = 3.0
				technology = motorised_infantry
			}
		}
	}

	focus = {
		id = CZE_armour_bonus_1
		icon = GFX_goal_generic_army_tanks
		prerequisite = { focus = CZE_military_research_institute }
		x = 3
		y = 1
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 70
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1.0
				uses = 1
				category = armor
			}
		}
	}

	focus = {
		id = CZE_mechanization
		icon = GFX_focus_generic_mechanized
		prerequisite = { focus = CZE_motorization_scheme }
		x = 1
		y = 2
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = CZE_mechanization #@#
				bonus = 1.0
				uses = 1
				category = cat_mechanized_equipment
			}
		}
	}

	focus = {
		id = CZE_armour_bonus_ii
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = CZE_armour_bonus_1 }
		x = 3
		y = 2
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 60
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1.0
				uses = 1
				category = armor
			}
		}
	}

	focus = {
		id = CZE_doctrine_bonus_2
		icon = GFX_focus_FIN_motti_tactics
		prerequisite = { focus = CZE_mechanization }
		prerequisite = { focus = CZE_armour_bonus_ii }
		x = 2
		y = 3
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
	}

	focus = {
		id = CZE_war_college
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = CZE_doctrine_bonus }
		prerequisite = { focus = CZE_doctrine_bonus_2 }
		x = 0
		y = 4
		relative_position_id = CZE_military_research_institute

		cost = 10

		ai_will_do = {
			factor = 90
			modifier = {
				factor = 0.1
				HABSBURG_joint_trigger = yes
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_ideas = CZE_war_college_idea
			if = {
				limit = {
					NOT = { amount_research_slots > 4 }
				}
				add_research_slot = 1
				custom_effect_tooltip = CZE_war_college_effect_tt
			}
		}
	}

################# ARMY ###################
	
	focus = {
		id = CZE_state_defense_guard
		icon = GFX_focus_CZE_state_defense_guard
		
		prerequisite = { 
		}
		
		mutually_exclusive = { 
		}
		
		x = 20
		y = 0
		#relative_position_id = CZE_consolidate_the_coalition
		
		offset = {
			x = -16
			y = 0
			trigger = {
				has_completed_focus = CZE_consolidate_the_coalition
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
		}

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
		}
		
		search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_MANPOWER FOCUS_FILTER_HISTORICAL }

		completion_reward = {
			army_experience = 15
			effect_tooltip = {
				add_ideas = CZE_army_ns
			}
			unlock_decision_tooltip = CZE_mobilize_the_sos
			unlock_decision_tooltip = CZE_recruit_sokol_members
			hidden_effect = {
				add_dynamic_modifier = { modifier = CZE_czechoslovak_army_modifier }
				set_variable = { CZE_army_modifier_resistance_damage_to_garrison = -0.1 }
				set_variable = { CZE_army_modifier_conscription_factor = 0.1 }
				set_variable = { CZE_army_modifier_intel_network_gain_factor = 0 }
				set_variable = { CZE_army_modifier_agency_upgrade_time = 0 }
				set_variable = { CZE_army_modifier_operative_slot = 0 }
				set_variable = { CZE_army_modifier_subversive_activites_upkeep = 0 }
				set_variable = { CZE_army_modifier_decryption = 0 }
				set_variable = { CZE_army_modifier_production_speed_bunker_factor = 0 }
				set_variable = { CZE_army_modifier_land_bunker_effectiveness_factor = 0 }
				set_variable = { CZE_army_modifier_army_defence_factor = 0 }
				set_variable = { CZE_army_modifier_max_dig_in_factor = 0 }
				set_variable = { CZE_army_modifier_army_attack_factor = 0 }
				set_variable = { CZE_army_modifier_planning_speed = 0 }
				set_variable = { CZE_army_modifier_army_artillery_attack_factor = 0 }
				set_variable = { CZE_army_modifier_army_artillery_defence_factor = 0 }
				set_variable = { CZE_army_modifier_army_infantry_attack_factor = 0 }
				set_variable = { CZE_army_modifier_army_infantry_defence_factor = 0 }
				set_variable = { CZE_army_modifier_truck_attrition_factor = 0 }
				set_variable = { CZE_army_modifier_supply_consumption_factor = 0 }
				set_variable = { CZE_army_modifier_terrain_penalty_reduction = 0 }
				set_variable = { CZE_army_modifier_conscription = 0 }
				set_variable = { CZE_army_modifier_army_org_factor = 0 }
				set_variable = { CZE_army_modifier_army_morale_factor = 0 }
				set_variable = { CZE_army_modifier_training_time_army_factor = 0 }
				set_variable = { CZE_army_modifier_breakthrough_factor = 0 }
				set_variable = { CZE_army_modifier_org_loss_when_moving = 0 }
				set_variable = { CZE_army_modifier_org_loss_at_low_org_factor = 0 }
			}
		}
	}
	
	focus = {
		id = CZE_army_college
		icon = GFX_focus_generic_military_academy
		
		prerequisite = { 
			focus = CZE_state_defense_guard
		}
		
		mutually_exclusive = { 
		}
		
		x = 0
		y = 1
		relative_position_id = CZE_state_defense_guard

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
		}
		
		search_filters = { FOCUS_FILTER_HISTORICAL }

		completion_reward = {
			add_command_power = 50
			every_army_leader = {
				gain_xp = 500
			}
			if = {
				limit = {
					SLO = { exists = no }
				}
				add_corps_commander_role = {
					Character = CZE_rudolf_viest
					skill = 1
					attack_skill = 2
					defense_skill = 2
					planning_skill = 1
					logistics_skill = 2
				}
			}
		}
	}
	
	focus = {
		id = CZE_vojenske_zpravodajstvi
		icon = GFX_focus_CZE_military_intelligence
		
		prerequisite = { 
			focus = CZE_state_defense_guard
		}
		
		mutually_exclusive = { 
		}
		
		x = -3
		y = 1
		relative_position_id = CZE_state_defense_guard

		cost = 7

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
		}
		
		search_filters = { FOCUS_FILTER_HISTORICAL }

		completion_reward = {
			if = {
				limit = { has_dlc = "La Resistance" }
				if = {
					limit = {
						has_intelligence_agency = no
					}
					create_intelligence_agency = yes
				}
				add_to_variable = { CZE_army_modifier_intel_network_gain_factor = 0.05 }
				add_to_variable = { CZE_army_modifier_agency_upgrade_time = -0.1 }
				add_to_variable = { CZE_army_modifier_operative_slot = 1 }
				custom_effect_tooltip = CZE_vojenske_zpravodajstvi_lar_add_to_modifier_tt
				create_operative_leader = {
					name = CZE_paul_thuemmel
					GFX = GFX_portrait_CZE_paul_thuemmel
					traits = { operative_double_agent operative_tough operative_infiltrator }
					bypass_recruitment = no
					available_to_spy_master = yes
					nationalities = { GER CZE }
					gender = male
				}
			}
			else = {
				add_to_variable = { CZE_army_modifier_subversive_activites_upkeep = -0.25 }
				add_to_variable = { CZE_army_modifier_decryption = 1 }
				custom_effect_tooltip = CZE_vojenske_zpravodajstvi_add_to_modifier_tt
			}
			country_event = czechoslovak_rework.88
			custom_effect_tooltip = CZE_vojenske_zpravodajstvi_tt
		}
	}
	
	focus = {
		id = CZE_rop_expansion
		icon = GFX_focus_CZE_rop_expansion
		
		prerequisite = { 
			focus = CZE_state_defense_guard
		}
		
		mutually_exclusive = { 
		}
		
		x = 3
		y = 1
		relative_position_id = CZE_state_defense_guard

		cost = 7

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
		}
		
		search_filters = { FOCUS_FILTER_HISTORICAL }

		completion_reward = { 
			add_to_variable = { CZE_army_modifier_production_speed_bunker_factor = 0.2 }
			custom_effect_tooltip = CZE_rop_expansion_add_to_modifier_tt
			
			add_tech_bonus = {
				bonus = 1
				uses = 1
				category = cat_fortification
			}
			
			unlock_decision_tooltip = CZE_first_fallback_line
			unlock_decision_tooltip = CZE_moravian_fallback_line
			unlock_decision_tooltip = CZE_fortify_southern_slovakia
			unlock_decision_tooltip = CZE_the_ropik
		}
	}
}